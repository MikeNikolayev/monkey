---
title: "MSSQL Exploiter"
draft: false
description: "Exploits MSSQL by taking advantage of insecure configuration"
tags: ["exploiter", "mssql", "brute force"]
pre: "<i class='fa fa-database'></i> "
---

## MSSQL

[MSSQL (Microsoft SQL Server)](
https://learn.microsoft.com/en-us/sql/sql-server/what-is-sql-server) is a
relational database management system (RDBMS) developed by Microsoft whose
functions include managing, storing, retrieving, manipulating, and analyzing
data efficiently.

[`xp_cmdshell`](
https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/xp-cmdshell-transact-sql)
is a procedure in MSSQL that allows users to execute Windows shell commands
from within the SQL Server environment.

## Exploitation

Machines with MSSQL that have `xp_cmdshell` enabled may be accessible to
attackers if they come across the correct credentials.

Infection Monkey's MSSQL exploiter uses brute-force to propagate to a victim
by taking advantage of insecure MSSQL configuration. It leverages the
`xp_cmdshell` feature to execute commands on the server.

![MSSQL Configuration](
/images/island/configuration-page/mssql-exploiter-configuration.png
"MSSQL Configuration")

### Credentials used

The MSSQL exploiter will use [user-configured credentials](
/usage/configuration/credentials) as well as credentials collected from other
victims for brute-forcing. All possible combinations of usernames and passwords
are used, prioritizing pairs provided by the user in the configuration.

## Mitigation

Disable the `xp_cmdshell` option.

To learn more about how to disable this feature, read [Microsoft's
documentation](
https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/xp-cmdshell-server-configuration-option?view=sql-server-2017).

## See also
- [MSSQL exploiter reference documentation](/reference/exploiters/mssql)
